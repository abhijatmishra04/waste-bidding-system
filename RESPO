@Test
public void testOpenAndRead_Success() throws Exception {
    // Set execution context values
    executionContext.putInt("fromLine", 1);
    executionContext.putInt("toLine", 2);

    // Add expected keys in the ExecutionContext
    executionContext.putString("directoryPath", testFilePath.getParent().toString());
    executionContext.putString("filePrefixReferData", "test-input");
    executionContext.putString("LOCK_FILE_EXTENSION", ".txt"); // If applicable in the implementation

    try {
        // Open the file reader
        fileReader.open(executionContext);

        // Read first record
        CustaggRecordsDTO record1 = fileReader.read();
        assertNotNull("First record should not be null", record1);
        assertEquals("PRO", record1.getProductCode());
        assertEquals("ENTITY001", record1.getEntity());
        assertEquals("ACC123456789012345", record1.getAccountNumber());

        // Read second record
        CustaggRecordsDTO record2 = fileReader.read();
        assertNotNull("Second record should not be null", record2);
        assertEquals("PRO", record2.getProductCode());
        assertEquals("ENTITY002", record2.getEntity());
        assertEquals("ACC987654321098765", record2.getAccountNumber());

        // Ensure no more records are available
        assertNull("No more records expected", fileReader.read());
    } finally {
        fileReader.close();
    }
}
