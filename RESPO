import static org.junit.Assert.*;

import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.InjectMocks;
import org.mockito.MockitoAnnotations;
import org.mockito.junit.MockitoJUnitRunner;
import org.springframework.boot.web.servlet.FilterRegistrationBean;

@RunWith(MockitoJUnitRunner.class)
public class BatchApplicationTest {

    @InjectMocks
    private BatchApplication batchApplication;

    @Before
    public void setUp() {
        MockitoAnnotations.initMocks(this);
    }

    // ðŸ”¹ Test: Ensure `errorHandlingFilterRegistration()` registers ErrorHandlingFilter
    @Test
    public void testErrorHandlingFilterRegistration_ReturnsFilterBean() {
        FilterRegistrationBean<?> result = batchApplication.errorHandlingFilterRegistration();

        assertNotNull("errorHandlingFilterRegistration() should return a valid FilterRegistrationBean", result);
        assertNotNull("Filter should not be null", result.getFilter());
        assertEquals("ErrorHandlingFilter should be mapped to /*", "/*", 
                     result.getUrlPatterns().iterator().next());
    }

    // ðŸ”¹ Test: Ensure `transactionTracingFilterRegistration()` registers TransactionTracingFilter
    @Test
    public void testTransactionTracingFilterRegistration_ReturnsFilterBean() {
        FilterRegistrationBean<?> result = batchApplication.transactionTracingFilterRegistration();

        assertNotNull("transactionTracingFilterRegistration() should return a valid FilterRegistrationBean", result);
        assertNotNull("Filter should not be null", result.getFilter());
        assertEquals("TransactionTracingFilter should be mapped to /*", "/*", 
                     result.getUrlPatterns().iterator().next());
    }

    // ðŸ”¹ Test: Ensure `reqRespLoggerFilterRegistration()` registers ReqRespLoggerFilter
    @Test
    public void testReqRespLoggerFilterRegistration_ReturnsFilterBean() {
        FilterRegistrationBean<?> result = batchApplication.reqRespLoggerFilterRegistration();

        assertNotNull("reqRespLoggerFilterRegistration() should return a valid FilterRegistrationBean", result);
        assertNotNull("Filter should not be null", result.getFilter());
        assertEquals("ReqRespLoggerFilter should be mapped to /*", "/*", 
                     result.getUrlPatterns().iterator().next());
    }

    // ðŸ”¹ Test: Ensure `headerFilterRegistration()` registers HttpHeadersFilter
    @Test
    public void testHeaderFilterRegistration_ReturnsFilterBean() {
        FilterRegistrationBean<?> result = batchApplication.headerFilterRegistration();

        assertNotNull("headerFilterRegistration() should return a valid FilterRegistrationBean", result);
        assertNotNull("Filter should not be null", result.getFilter());
        assertEquals("HttpHeadersFilter should be mapped to /*", "/*", 
                     result.getUrlPatterns().iterator().next());
    }
}
